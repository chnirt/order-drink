(this["webpackJsonpreact-hooks-context-authenticate"]=this["webpackJsonpreact-hooks-context-authenticate"]||[]).push([[3,9],{153:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return w}));var n=t(41),r=t(0),l=t.n(r),o=t(105),c=t(185),i=t(420),u=t(62),d=t(448),s=t(449),m=t(450),v=t(487),p=t(452),E=t(454),f=t(95),h=t(553),b=t.n(h),g=t(552),O=t.n(g);const j=Object(o.a)({root:{"& > *":{borderBottom:"unset"}}});function y(e){const a=e.row,t=l.a.useState(!1),r=Object(n.a)(t,2),o=r[0],v=r[1],f=j();return l.a.createElement(l.a.Fragment,null,l.a.createElement(E.a,{className:f.root,component:"th",scope:"row"},l.a.createElement(m.a,null,l.a.createElement(u.a,{"aria-label":"expand row",size:"small",onClick:()=>v(!o)},o?l.a.createElement(O.a,null):l.a.createElement(b.a,null))),l.a.createElement(m.a,{component:"th",scope:"row"},a.name),l.a.createElement(m.a,{align:"right"},a._id),l.a.createElement(m.a,{align:"right"},a.count)),l.a.createElement(E.a,null,l.a.createElement(m.a,{style:{paddingBottom:0,paddingTop:0},colSpan:6},l.a.createElement(i.a,{in:o,timeout:"auto",unmountOnExit:!0},l.a.createElement(c.a,{margin:1},l.a.createElement(d.a,{size:"small","aria-label":"purchases"},l.a.createElement(p.a,null,l.a.createElement(E.a,null,l.a.createElement(m.a,null,"Orderer"),l.a.createElement(m.a,{align:"right"}))),l.a.createElement(s.a,null,a.orders.map((e,a)=>l.a.createElement(E.a,{key:a},l.a.createElement(m.a,{component:"th",scope:"row"},e.username),l.a.createElement(m.a,{align:"right"},"1"))))))))))}const k=Object(o.a)({table:{minWidth:600}});function w({orders:e}){const a=k();return l.a.createElement(l.a.Fragment,null,l.a.createElement(v.a,{component:f.a},l.a.createElement(d.a,{className:a.table,"aria-label":"spanning table"},l.a.createElement(p.a,null,l.a.createElement(E.a,null,l.a.createElement(m.a,null),l.a.createElement(m.a,null),l.a.createElement(m.a,{align:"right"},"Name"),l.a.createElement(m.a,{align:"right"},"Amount"))),l.a.createElement(s.a,null,e.map((e,a)=>l.a.createElement(y,{key:a,row:e})),l.a.createElement(E.a,null,l.a.createElement(m.a,null,"Subtotal"),l.a.createElement(m.a,{colSpan:2}),l.a.createElement(m.a,{align:"right"},e.reduce((e,a)=>e+a.count,0)))))))}},164:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return P}));var n=t(25),r=t.n(n),l=t(57),o=t(41),c=t(0),i=t.n(c),u=t(203),d=t(71),s=t(479),m=t(431),v=t(483),p=t(432),E=t(480),f=t(493),h=t(446),b=t(44),g=t(482),O=t(62),j=t(95),y=t(679),k=t.n(y),w=t(678),x=t.n(w),z=t(221),L=t.n(z),_=t(64),I=t(551),M=t(510),N=t(153),S=t(195),B=t(297);const A=Object(u.a)(e=>({breadcrumb:{padding:e.spacing(1)},content:{marginTop:e.spacing(2)},root:{overflow:"auto",maxHeight:"calc(100vh - 249px)"},ul:{backgroundColor:"inherit",padding:0},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}));function P(){const e=A();let a=Object(d.i)().invitationId;const t=Object(d.h)(),n=t.pathname,u=t.search,y=Object(S.a)("".concat(_.a.url,"/orders")).onPost,w=Object(S.a)("".concat(_.a.url,"/orders")).onDelete,z=Object(B.b)(),P=z.socketEmit,C=z.socketOn,H=Object(c.useState)(""),D=Object(o.a)(H,2),V=D[0],F=D[1],J=Object(c.useState)([]),K=Object(o.a)(J,2),T=K[0],U=K[1],q=Object(c.useState)([]),W=Object(o.a)(q,2),G=W[0],Q=W[1],R=Object(c.useState)(!1),X=Object(o.a)(R,2),Y=X[0],Z=X[1],$=Object(c.useState)({}),ee=Object(o.a)($,2),ae=ee[0],te=ee[1],ne=localStorage.getItem("access-token");function re(){return(re=Object(l.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Z(!0),e.next=3,y({dishId:t,invitation:a,quantity:1});case 3:(n=e.sent)&&(te(n),P("addOrder",{roomId:a,data:t})),Z(!1);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function le(){return(le=Object(l.a)(r.a.mark((function e(t){var n,l;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Z(!0),e.next=3,L.a.get("".concat(_.a.url,"/orders"),{params:{mine:!0,invitationId:a,dishId:t},headers:{Authorization:"Bearer ".concat(ne)}});case 3:if(200!==(n=e.sent).status||!n.data){e.next=11;break}return l=n.data[0]._id,e.next=8,w(l);case 8:e.sent&&(te({}),P("deleteOrder",{roomId:a,data:t})),Z(!1);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(c.useEffect)(()=>{P("joined room",a),C("joined room",e=>{console.log("joined room:",e)}),C("report",e=>{console.log("report: ",e);const a=null===e||void 0===e?void 0:e[0].orders;Q(a)})},[]),Object(c.useEffect)(()=>{!function(){Z(!0);const e=L.a.get("".concat(_.a.url,"/invitations/").concat(a,"/menu"),{headers:{Authorization:"Bearer ".concat(ne)}}).then(e=>{var a,t,n,r,l,o;const c=null===e||void 0===e||null===(a=e.data)||void 0===a||null===(t=a.reply)||void 0===t||null===(n=t.delivery_detail)||void 0===n||null===(r=n.brand)||void 0===r?void 0:r.name,i=null===e||void 0===e||null===(l=e.data)||void 0===l||null===(o=l.reply)||void 0===o?void 0:o.menu_infos;F(c),U(i)}),t=L.a.get("".concat(_.a.url,"/invitations/").concat(a,"/report"),{headers:{Authorization:"Bearer ".concat(ne)}}).then(e=>{var a;const t=null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a[0].orders;Q(t)}),n=L.a.get("".concat(_.a.url,"/orders"),{params:{mine:!0,invitationId:a},headers:{Authorization:"Bearer ".concat(ne)}}).then(e=>{var a;const t=null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a[0];te(t)});Promise.all([e,t,n]).catch(e=>console.log(e)).finally(()=>Z(!1))}()},[V,n,u]),i.a.createElement("div",null,i.a.createElement("div",{className:e.breadcrumb},i.a.createElement(M.a,{basename:"Dashboard",path:n,formatLast:!0})),i.a.createElement("div",{className:e.content},i.a.createElement(s.a,{container:!0,spacing:3},i.a.createElement(s.a,{item:!0,xs:12,sm:6},i.a.createElement(m.a,{className:e.root,subheader:i.a.createElement("li",{style:{backgroundColor:"#fff"}}),button:"true"},null===T||void 0===T?void 0:T.map((a,t)=>{var n;return i.a.createElement("li",{key:t},i.a.createElement("ul",{className:e.ul},i.a.createElement(v.a,null,i.a.createElement("span",{style:{whiteSpace:"nowrap",overflow:"hidden",width:"200px",textOverflow:"ellipsis"}},null===a||void 0===a?void 0:a.dish_type_name)),null===a||void 0===a||null===(n=a.dishes)||void 0===n?void 0:n.map((a,t)=>{var n,r,l;return i.a.createElement(p.a,{key:t},i.a.createElement(E.a,null,i.a.createElement(f.a,{alt:null===a||void 0===a||null===(n=a.photos[4])||void 0===n?void 0:n.value,src:null===a||void 0===a||null===(r=a.photos[4])||void 0===r?void 0:r.value})),i.a.createElement(h.a,{id:null===a||void 0===a?void 0:a.name,primary:null===a||void 0===a?void 0:a.name,secondary:i.a.createElement(i.a.Fragment,null,i.a.createElement(b.a,{component:"span",variant:"body2",className:e.inline,color:"textPrimary"},null===a||void 0===a||null===(l=a.price)||void 0===l?void 0:l.value," VND")," \u2014 ".concat(null===a||void 0===a?void 0:a.description))}),i.a.createElement(g.a,null,(null===ae||void 0===ae?void 0:ae.dishId)===(null===a||void 0===a?void 0:a.name)?i.a.createElement(O.a,{edge:"end","aria-label":"comments",onClick:()=>function(e){return le.apply(this,arguments)}(null===a||void 0===a?void 0:a.name)},i.a.createElement(x.a,null)):i.a.createElement(O.a,{edge:"end","aria-label":"comments",onClick:()=>function(e){return re.apply(this,arguments)}(null===a||void 0===a?void 0:a.name)},i.a.createElement(k.a,null))))})))}))),i.a.createElement(s.a,{item:!0,xs:12,sm:6},i.a.createElement(j.a,{className:e.paper},i.a.createElement(N.default,{orders:G}))))),i.a.createElement(I.a,{open:Y}))}},509:function(e,a,t){"use strict";t.d(a,"a",(function(){return n}));const n=(e="")=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()},510:function(e,a,t){"use strict";t.d(a,"a",(function(){return d}));var n=t(0),r=t.n(n),l=t(44),o=t(491),c=t(55),i=t(492),u=t(509);function d({basename:e="",path:a="",formatLast:t=!1}){const n=Object(i.a)().t,d="".concat(e).concat(a).split("/");return r.a.createElement(o.a,{"aria-label":"breadcrumb"},d.map((e,a)=>{const o=Object(u.a)(e);return a===d.length-1?r.a.createElement(l.a,{key:a,color:"textPrimary"},t?o:n("src.components.Breadcrumb.".concat(o))):r.a.createElement(c.b,{key:a,to:"/".concat(e),style:{color:"inherit",textDecoration:"none"}},n("src.components.Breadcrumb.".concat(o)))}))}},551:function(e,a,t){"use strict";t.d(a,"a",(function(){return u}));var n=t(0),r=t.n(n),l=t(105),o=t(202),c=t(352);const i=Object(l.a)(e=>({backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}));function u({open:e=!1}){const a=i();return r.a.createElement(o.a,{className:a.backdrop,open:e},r.a.createElement(c.a,{color:"inherit"}))}},552:function(e,a,t){"use strict";var n=t(39);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var r=n(t(0)),l=(0,n(t(46)).default)(r.default.createElement("path",{d:"M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"}),"KeyboardArrowUp");a.default=l},553:function(e,a,t){"use strict";var n=t(39);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var r=n(t(0)),l=(0,n(t(46)).default)(r.default.createElement("path",{d:"M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"}),"KeyboardArrowDown");a.default=l},678:function(e,a,t){"use strict";var n=t(39);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var r=n(t(0)),l=(0,n(t(46)).default)(r.default.createElement("path",{d:"M14.12 10.47L12 12.59l-2.13-2.12-1.41 1.41L10.59 14l-2.12 2.12 1.41 1.41L12 15.41l2.12 2.12 1.41-1.41L13.41 14l2.12-2.12zM15.5 4l-1-1h-5l-1 1H5v2h14V4zM6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM8 9h8v10H8V9z"}),"DeleteForeverOutlined");a.default=l},679:function(e,a,t){"use strict";var n=t(39);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var r=n(t(0)),l=(0,n(t(46)).default)(r.default.createElement("path",{d:"M14.77 9L12 12.11 9.23 9h5.54M21 3H3v2l8 9v5H6v2h12v-2h-5v-5l8-9V3zM7.43 7L5.66 5h12.69l-1.78 2H7.43z"}),"LocalBarOutlined");a.default=l}}]);
//# sourceMappingURL=3.2d1150a3.chunk.js.map