(this["webpackJsonpreact-hooks-context-authenticate"]=this["webpackJsonpreact-hooks-context-authenticate"]||[]).push([[5],{166:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return _}));var n=a(25),o=a.n(n),c=a(57),r=a(41),i=a(0),l=a.n(i),s=a(71),u=a(522),d=a(203),p=a(600),m=a.n(p),b=a(657),f=a.n(b),h=a(658),g=a.n(h),v=a(659),O=a.n(v),E=a(492),P=a(459),j=a(455),C=a(196),x=a(354),S=a(358),T=a(447),I=a(353),y=a(442),w=a(457),k=a(510),D=a(37),R=a(441),q=a(472),L=a(474),A=a(475),F=a(476),B=a(477);function N(e){let t=e.title,a=void 0===t?"Title":t,n=e.children,o=e.open,c=void 0!==o&&o,r=e.scroll,s=void 0===r?"paper":r,u=e.onClose,d=e.onSubmit,p=e.submitText,m=void 0===p?"Submit":p,b=e.onCancel,f=e.cancelText,h=void 0===f?"Cancel":f,g=e.isSubmitting,v=(e.resetForm,Object(D.a)(e,["title","children","open","scroll","onClose","onSubmit","submitText","onCancel","cancelText","isSubmitting","resetForm"]));const O=Object(i.useRef)(null);return Object(i.useEffect)(()=>{if(c){const e=O.current;null!==e&&e.focus()}},[c]),l.a.createElement(q.a,Object.assign({open:c,onClose:u,scroll:s,"aria-labelledby":"scroll-dialog-title","aria-describedby":"scroll-dialog-description"},v,{fullWidth:!0,maxWidth:"xs"}),l.a.createElement(B.a,{id:"scroll-dialog-title"},a),l.a.createElement(A.a,{dividers:"paper"===s},l.a.createElement(F.a,{id:"scroll-dialog-description",ref:O,tabIndex:-1},n)),l.a.createElement(L.a,null,l.a.createElement(R.a,{onClick:b,color:"secondary"},h),l.a.createElement(R.a,{onClick:d,disabled:g,color:"primary"},m)))}var W=a(81),z=a(521);const G=z.b({coupon:z.d().required("Coupon is required").max(10,"Coupon must be at most 10 characters"),reason:z.d().required("Reason is required"),menuId:z.d().required("Menu is required"),isPublic:z.a()});var M=a(684);var U=a(549),H=a(550),J=a(64);const V=Object(d.a)(e=>({breadcrumb:{padding:e.spacing(1)},content:{marginTop:e.spacing(2)},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}})),Y="src.pages.invitation";function _(e){const t=V(),a=Object(E.a)().t,n=Object(W.b)().getColor,d=Object(s.h)().pathname;let p=Object(U.a)("".concat(J.a.url,"/invitations"),!1,{params:{mine:!0,sortBy:"-createdAt"},responseDTO:H.b}),b=p.data,h=p.loading,v=p.onGet,D=p.onPost,R=p.onPatch,q=p.onDelete;const L=Object(i.useState)(null),A=Object(r.a)(L,2),F=A[0],B=A[1],z=Object(i.useState)(null),_=Object(r.a)(z,2),K=_[0],Q=_[1],X=[{title:a("".concat(Y,".Coupon")),field:"coupon"},{title:a("".concat(Y,".Reason")),field:"reason"},{title:a("".concat(Y,".Menu")),field:"menuId",lookup:{"phuc-long":"phuc-long","go-cafe":"go-cafe",highlands:"highlands"},render:e=>l.a.createElement(P.a,{style:{backgroundColor:(e=>{switch(e){case"go-cafe":return n("brown");case"highlands":return n("red");default:return n("green")}})(e.menuId)},color:"primary",label:e.menuId})},{title:a("".concat(Y,".Public")),field:"isPublic"}],Z=Object(i.useState)(!1),$=Object(r.a)(Z,2),ee=$[0],te=$[1];function ae(e){B(e),te(!0)}function ne(){te(!1),Q(null),me()}function oe(){return(oe=Object(c.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:se();case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}const ce=Object(u.a)({initialValues:{coupon:Object(M.a)("1234567890abcdef",10)(),reason:"",menuId:"",isPublic:!1},validationSchema:G,onSubmit:function(){var e=Object(c.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:K?R(K,t):D(t,{requestDTO:H.a}),ne();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),re=ce.values,ie=ce.handleChange,le=ce.handleBlur,se=ce.handleSubmit,ue=ce.errors,de=ce.touched,pe=ce.isSubmitting,me=ce.resetForm,be=ce.setFieldValue;return l.a.createElement("div",null,l.a.createElement("div",{className:t.breadcrumb},l.a.createElement(k.a,{basename:"Dashboard",path:d},a("".concat(Y,".Invitation")))),l.a.createElement("div",{className:t.content},l.a.createElement(m.a,{title:a("".concat(Y,".InvitationList")),columns:X,data:b,isLoading:h,options:{filtering:!0,actionsColumnIndex:-1,grouping:!0,fixedColumns:{},pageSize:5,pageSizeOptions:[5,10]},actions:[{icon:()=>l.a.createElement(f.a,null),tooltip:a("".concat(Y,".CreateInvitation")),isFreeAction:!0,onClick:e=>{ae("create")}},e=>({icon:()=>l.a.createElement(g.a,null),tooltip:a("".concat(Y,".UpdateInvitation")),onClick:function(){var e=Object(c.a)(o.a.mark((function e(t,a){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v(a.id);case 2:n=e.sent,be("coupon",n.coupon),be("reason",n.reason),be("menuId",n.menuId),be("isPublic",n.isPublic),Q(a.id),ae("update");case 9:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()}),e=>({icon:()=>l.a.createElement(O.a,null),tooltip:a("".concat(Y,".DeleteInvitation")),onClick:(e,t)=>{Q(t.id),ae("delete")}})],editable:{},localization:{pagination:{labelDisplayedRows:"{from}-{to} ".concat(a(Y+".of")," {count}"),labelRowsSelect:a("".concat(Y,".rows")),firstAriaLabel:a("".concat(Y,".FirstPage")),firstTooltip:a("".concat(Y,".FirstPage")),previousAriaLabel:a("".concat(Y,".PreviousPage")),previousTooltip:a("".concat(Y,".PreviousPage")),nextAriaLabel:a("".concat(Y,".NextPage")),nextTooltip:a("".concat(Y,".NextPage")),lastAriaLabel:a("".concat(Y,".LastPage")),lastTooltip:a("".concat(Y,".LastPage"))},toolbar:{nRowsSelected:"{0} row(s) selected",searchTooltip:a("".concat(Y,".Search")),searchPlaceholder:a("".concat(Y,".Search"))},header:{actions:a("".concat(Y,".Actions"))},body:{emptyDataSourceMessage:a("".concat(Y,".NRTD")),filterRow:{filterTooltip:a("".concat(Y,".Filter"))}},grouping:{placeholder:a("".concat(Y,".DHHTGB"))}}})),l.a.createElement(N,{open:ee,onClose:ne,onCancel:ne,cancelText:a("".concat(Y,".Cancel")),onSubmit:"create"===F?function(){se()}:"update"===F?function(){return oe.apply(this,arguments)}:function(){q(K),ne()},submitText:a("".concat(Y,"create"===F?".Save":".OK")),isSubmitting:pe,resetForm:me,title:a("".concat(Y,"create"===F?".NewInvitation":"update"===F?".UpdateInvitation":".DeleteInvitation")),maxWidth:"md"},"delete"!==F?l.a.createElement(i.Fragment,null,l.a.createElement(j.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"coupon",autoComplete:"coupon",id:ue.coupon&&de.coupon?"standard-error-helper-text":"coupon",label:ue.coupon&&de.coupon?"Error Coupon":a("".concat(Y,".Coupon")),error:!(!ue.coupon||!de.coupon),helperText:!(!ue.coupon||!de.coupon)&&ue.coupon,value:re.coupon,onChange:ie,onBlur:le}),l.a.createElement(j.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"reason",autoComplete:"reason",id:ue.reason&&de.reason?"standard-error-helper-text":"reason",label:ue.reason&&de.reason?"Error Reason":a("".concat(Y,".Reason")),error:!(!ue.reason||!de.reason),helperText:!(!ue.reason||!de.reason)&&ue.reason,value:re.reason,onChange:ie,onBlur:le}),l.a.createElement(C.a,{variant:"outlined",margin:"normal",fullWidth:!0,error:ue.menuId},l.a.createElement(x.a,{id:"menu-label"},a("".concat(Y,".Menu"))),l.a.createElement(S.a,{labelId:"menu-label",id:"menu",value:re.menuId,onChange:ie,label:a("".concat(Y,".Menu")),inputProps:{name:"menuId",id:"menu-label"}},l.a.createElement(T.a,{value:""},l.a.createElement("em",null,"None")),l.a.createElement(T.a,{value:"phuc-long"},"Ph\xfac Long"),l.a.createElement(T.a,{value:"go-cafe"},"G\u1edd Cafe"),l.a.createElement(T.a,{value:"highlands"},"Highlands")),!(!ue.menuId||!de.menuId)&&l.a.createElement(I.a,null,ue.menuId)),l.a.createElement(C.a,{variant:"outlined",margin:"normal",fullWidth:!0,required:!0,error:!(!ue.isPublic||!de.isPublic)&&ue.isPublic,component:"fieldset"},l.a.createElement(y.a,{control:l.a.createElement(w.a,{value:"allowExtraEmails",color:"primary",checked:re.isPublic,onChange:()=>{be("isPublic",!re.isPublic)}}),label:a("".concat(Y,".Public"))}),!(!ue.isPublic||!de.isPublic)&&l.a.createElement(I.a,null,ue.isPublic))):a("".concat(Y,".AYSYWTDTI"))))}},509:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));const n=(e="")=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()},510:function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var n=a(0),o=a.n(n),c=a(44),r=a(491),i=a(55),l=a(492),s=a(509);function u({basename:e="",path:t="",formatLast:a=!1}){const n=Object(l.a)().t,u="".concat(e).concat(t).split("/");return o.a.createElement(r.a,{"aria-label":"breadcrumb"},u.map((e,t)=>{const r=Object(s.a)(e);return t===u.length-1?o.a.createElement(c.a,{key:t,color:"textPrimary"},a?r:n("src.components.Breadcrumb.".concat(r))):o.a.createElement(i.b,{key:t,to:"/".concat(e),style:{color:"inherit",textDecoration:"none"}},n("src.components.Breadcrumb.".concat(r)))}))}},549:function(e,t,a){"use strict";a.d(t,"a",(function(){return p}));var n=a(25),o=a.n(n),c=a(225),r=a(57),i=a(41),l=a(0),s=a(221),u=a.n(s);const d={};function p(e,t,a){const n=Object(l.useState)([]),s=Object(i.a)(n,2),p=s[0],m=s[1],b=Object(l.useState)(!1),f=Object(i.a)(b,2),h=f[0],g=f[1],v=Object(l.useState)(),O=Object(i.a)(v,2),E=O[0],P=O[1],j=Object(l.useState)(0),C=Object(i.a)(j,2),x=C[0],S=C[1],T=localStorage.getItem("access-token"),I=u.a.create({baseURL:e,timeout:5e3,headers:{Authorization:"Bearer ".concat(T)}}),y=()=>{delete d[e],S(x+1)};Object(l.useEffect)(()=>{let n=!1;if(t)m(null),g(!1);else{(function(){var t=Object(r.a)(o.a.mark((function t(){var r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:g(!0),d[e]?(r=d[e],m(r),g(!1)):I.get("/",Object(c.a)(Object(c.a)({},a),{},{transformResponse:[e=>a.responseDTO(JSON.parse(e))]})).then(t=>{n||(d[e]=t.data,m(t.data))}).catch(e=>{var t;e.response?P(null===(t=e.response)||void 0===t?void 0:t.data):P(e.message)}).finally(()=>g(!1));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}return()=>{n=!0}},[t,x]);return{data:p,setData:m,loading:h,error:E,refresh:y,onGet:e=>(console.log("GET:"),g(!0),new Promise((t,a)=>{I.get("/".concat(e)).then(e=>{200===e.status&&t(e.data)}).catch(e=>{var t;a(null===(t=e.response)||void 0===t?void 0:t.data)}).finally(()=>g(!1))})),onPost:(t,a)=>{console.log("POST:"),g(!0),I.post(e,t,Object(c.a)(Object(c.a)({},a),{},{transformRequest:[(e,t)=>a.requestDTO(e),...I.defaults.transformRequest]})).then(e=>{201===e.status&&y()}).catch(e=>{var t;e.response?P(null===(t=e.response)||void 0===t?void 0:t.data):P(e.message)}).finally(()=>g(!1))},onPut:(e,t)=>{console.log("PUT:"),g(!0),I.put("/".concat(e),t).then(e=>{200===e.status&&y()}).catch(e=>{var t;e.response?P(null===(t=e.response)||void 0===t?void 0:t.data):P(e.message)}).finally(()=>g(!1))},onPatch:(e,t)=>{console.log("PATCH:"),g(!0),I.patch("/".concat(e),t).then(e=>{200===e.status&&y()}).catch(e=>{var t;e.response?P(null===(t=e.response)||void 0===t?void 0:t.data):P(e.message)}).finally(()=>g(!1))},onDelete:e=>{console.log("DELETE:"),g(!0),I.delete("/".concat(e)).then(e=>{200===e.status&&y()}).catch(e=>{var t;e.response?P(null===(t=e.response)||void 0===t?void 0:t.data):P(e.message)}).finally(()=>g(!1))}}}},550:function(e,t,a){"use strict";a.d(t,"a",(function(){return c})),a.d(t,"b",(function(){return r}));var n=a(225),o=a(37);const c=(e={})=>{const t=e.id,a=e.isPublic,c=Object(o.a)(e,["id","isPublic"]);return Object(n.a)({id:t,isPublic:a},c)},r=(e={})=>e.map(e=>((e={})=>{const t=e._id,a=e.isPublic,c=Object(o.a)(e,["_id","isPublic"]);return Object(n.a)({id:t,isPublic:a},c)})(e))}}]);
//# sourceMappingURL=5.74c7789a.chunk.js.map