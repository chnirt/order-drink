(this["webpackJsonpreact-hooks-context-authenticate"]=this["webpackJsonpreact-hooks-context-authenticate"]||[]).push([[4],{167:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return Y}));var n=a(25),c=a.n(n),r=a(57),o=a(41),s=a(0),i=a.n(s),l=a(203),u=a(13),d=a(333),p=a(479),m=a(468),b=a(470),h=a(469),f=a(493),g=a(44),v=a(62),j=a(682),O=a.n(j),E=a(683),y=a.n(E),k=a(492),x=a(71),w=a(680),P=a.n(w),I=a(221),T=a.n(I),C=a(510),D=a(81);const S=(e="")=>e.split(" ").map(e=>e[0]).join("").slice(0,3);var R=a(509),N=a(550),z=a(64),A=a(549),B=a(551);const L=Object(l.a)(e=>({breadcrumb:{padding:e.spacing(1)},content:{marginTop:e.spacing(2)},root:{display:"flex"},search:{position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:"rgba(255, 255, 255, 0.15)","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.25)"},marginBottom:e.spacing(1),width:"100%",[e.breakpoints.up("sm")]:{width:"auto"}},searchIcon:{padding:e.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},inputInput:{padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),"px)"),transition:e.transitions.create("width"),width:"100%",[e.breakpoints.up("md")]:{width:"20ch"}},media:{width:100,height:100},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}));function Y(){const e=L(),t=Object(k.a)().t,a=Object(D.b)().main,n=Object(u.a)(),l=Object(x.h)().pathname;let j=Object(x.g)().push,E=Object(A.a)("".concat(z.a.url,"/invitations"),null,{params:{isPublic:!0,sortBy:"-createdAt"},responseDTO:N.b}),w=E.data,I=E.loading;const Y=Object(s.useState)(!1),q=Object(o.a)(Y,2),H=q[0],J=q[1];function U(){return(U=Object(r.a)(c.a.mark((function e(t){var a,n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.id,n=localStorage.getItem("access-token"),J(!0),e.prev=3,e.next=6,T.a.post("".concat(z.a.url,"/invitations/").concat(a,"/join"),w,{headers:{Authorization:"Bearer ".concat(n)}});case 6:return(r=e.sent).data&&(J(!1),j("/order/".concat(a))),e.abrupt("return",r.data);case 11:e.prev=11,e.t0=e.catch(3),J(!1),e.t0.response?"You joined"===e.t0.response.data.message&&j("/order/".concat(a)):e.t0.request;case 15:case"end":return e.stop()}}),e,null,[[3,11]])})))).apply(this,arguments)}return i.a.createElement("div",null,i.a.createElement("div",{className:e.breadcrumb},i.a.createElement(C.a,{basename:"Dashboard",path:l})),i.a.createElement("div",{className:e.content},i.a.createElement("div",{className:e.search},i.a.createElement("div",{className:e.searchIcon},i.a.createElement(O.a,null)),i.a.createElement(d.a,{placeholder:t("".concat("src.pages.todaywhooffer",".Coupon")),classes:{root:e.inputRoot,input:e.inputInput},inputProps:{"aria-label":"search"}})),i.a.createElement("div",{style:{display:"flex",paddingTop:10}},i.a.createElement(p.a,{container:!0,spacing:3},null===w||void 0===w?void 0:w.map((t,c)=>i.a.createElement(p.a,{key:c,item:!0,xs:12,sm:6,md:4},i.a.createElement(m.a,{style:{display:"flex"}},i.a.createElement(b.a,{className:e.media,image:t.image,title:"Paella dish"}),i.a.createElement(h.a,{style:{flex:1,justifyContent:"space-between",alignSelf:"center"},avatar:i.a.createElement(f.a,{"aria-label":"recipe",style:{color:n.palette.getContrastText(a)},src:t.avatar},i.a.createElement(g.a,null,S(Object(R.a)(t.invitor.username)))),action:i.a.createElement(v.a,{"aria-label":"settings",style:{},onClick:()=>function(e){return U.apply(this,arguments)}(t)},i.a.createElement(y.a,null)),title:t.reason,subheader:P()(t.createdAt).format("HH:mm DD/MM/YYYY")}))))))),i.a.createElement(B.a,{open:I||H}))}},509:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));const n=(e="")=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()},510:function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var n=a(0),c=a.n(n),r=a(44),o=a(491),s=a(55),i=a(492),l=a(509);function u({basename:e="",path:t="",formatLast:a=!1}){const n=Object(i.a)().t,u="".concat(e).concat(t).split("/");return c.a.createElement(o.a,{"aria-label":"breadcrumb"},u.map((e,t)=>{const o=Object(l.a)(e);return t===u.length-1?c.a.createElement(r.a,{key:t,color:"textPrimary"},a?o:n("src.components.Breadcrumb.".concat(o))):c.a.createElement(s.b,{key:t,to:"/".concat(e),style:{color:"inherit",textDecoration:"none"}},n("src.components.Breadcrumb.".concat(o)))}))}},549:function(e,t,a){"use strict";a.d(t,"a",(function(){return p}));var n=a(25),c=a.n(n),r=a(225),o=a(57),s=a(41),i=a(0),l=a(221),u=a.n(l);const d={};function p(e,t,a){const n=Object(i.useState)([]),l=Object(s.a)(n,2),p=l[0],m=l[1],b=Object(i.useState)(!1),h=Object(s.a)(b,2),f=h[0],g=h[1],v=Object(i.useState)(),j=Object(s.a)(v,2),O=j[0],E=j[1],y=Object(i.useState)(0),k=Object(s.a)(y,2),x=k[0],w=k[1],P=localStorage.getItem("access-token"),I=u.a.create({baseURL:e,timeout:5e3,headers:{Authorization:"Bearer ".concat(P)}}),T=()=>{delete d[e],w(x+1)};Object(i.useEffect)(()=>{let n=!1;if(t)m(null),g(!1);else{(function(){var t=Object(o.a)(c.a.mark((function t(){var o;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:g(!0),d[e]?(o=d[e],m(o),g(!1)):I.get("/",Object(r.a)(Object(r.a)({},a),{},{transformResponse:[e=>a.responseDTO(JSON.parse(e))]})).then(t=>{n||(d[e]=t.data,m(t.data))}).catch(e=>{var t;e.response?E(null===(t=e.response)||void 0===t?void 0:t.data):E(e.message)}).finally(()=>g(!1));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}return()=>{n=!0}},[t,x]);return{data:p,setData:m,loading:f,error:O,refresh:T,onGet:e=>(console.log("GET:"),g(!0),new Promise((t,a)=>{I.get("/".concat(e)).then(e=>{200===e.status&&t(e.data)}).catch(e=>{var t;a(null===(t=e.response)||void 0===t?void 0:t.data)}).finally(()=>g(!1))})),onPost:(t,a)=>{console.log("POST:"),g(!0),I.post(e,t,Object(r.a)(Object(r.a)({},a),{},{transformRequest:[(e,t)=>a.requestDTO(e),...I.defaults.transformRequest]})).then(e=>{201===e.status&&T()}).catch(e=>{var t;e.response?E(null===(t=e.response)||void 0===t?void 0:t.data):E(e.message)}).finally(()=>g(!1))},onPut:(e,t)=>{console.log("PUT:"),g(!0),I.put("/".concat(e),t).then(e=>{200===e.status&&T()}).catch(e=>{var t;e.response?E(null===(t=e.response)||void 0===t?void 0:t.data):E(e.message)}).finally(()=>g(!1))},onPatch:(e,t)=>{console.log("PATCH:"),g(!0),I.patch("/".concat(e),t).then(e=>{200===e.status&&T()}).catch(e=>{var t;e.response?E(null===(t=e.response)||void 0===t?void 0:t.data):E(e.message)}).finally(()=>g(!1))},onDelete:e=>{console.log("DELETE:"),g(!0),I.delete("/".concat(e)).then(e=>{200===e.status&&T()}).catch(e=>{var t;e.response?E(null===(t=e.response)||void 0===t?void 0:t.data):E(e.message)}).finally(()=>g(!1))}}}},550:function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"b",(function(){return o}));var n=a(225),c=a(37);const r=(e={})=>{const t=e.id,a=e.isPublic,r=Object(c.a)(e,["id","isPublic"]);return Object(n.a)({id:t,isPublic:a},r)},o=(e={})=>e.map(e=>((e={})=>{const t=e._id,a=e.isPublic,r=Object(c.a)(e,["_id","isPublic"]);return Object(n.a)({id:t,isPublic:a},r)})(e))},551:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var n=a(0),c=a.n(n),r=a(105),o=a(202),s=a(352);const i=Object(r.a)(e=>({backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}));function l({open:e=!1}){const t=i();return c.a.createElement(o.a,{className:t.backdrop,open:e},c.a.createElement(s.a,{color:"inherit"}))}}}]);
//# sourceMappingURL=4.3b7bfaae.chunk.js.map